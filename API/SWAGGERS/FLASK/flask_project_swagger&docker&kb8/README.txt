1. Покупка домена и аренда сервера.
Домен покупался на сайте рег ру, далее арендовался серве на сайте timeweb.
После в настройке домена на рег ру, были указаны бесплатные DNS сервера, а в ресурсных записях указан адрес сервера с привязкой к домену основному и с префиксом www.
Далее в настройках сервера был указан домен и адрес самого сервера.
2. Настройка сервера.
Для доступа необходимо было использовать логин root и пароль из настроек доступа.
Для удобства в панеле ssh на сервере был добавлен публичный ssh, сгенерированный на компьютере, с которого осуществлялся доступ.
3. Настройка докер.
Для начала был запущен докер контейнер с образом nginx, далее уже был составлен docker-compose.yaml файл для быстрого разворачивания докер контейнера.
Также необходимо было сгенерировать ssl сертификат с помощью certbot и letsencrypt.
Для генерации выполнялась команда   docker compose run --rm  certbot certonly --webroot --webroot-path /var/www/certbot/ -d webspace.moscow -d www.webspace.moscow/
Перед выполнением команды необходимо было запустить nginx и должен был осуществляться доступ к домену по nginx по порту 80.
После генерации, необходимо было из папки certbot перенсти все серты в контейнер в нужыне папки откуда тянутся ключи.
Все прописывается в docker-compose файле и добавляется доп настройка в nginx.conf для 443.
Серты действуют 3 месяца, после необходимо их обновлять командой docker compose run --rm certbot renew.
Для настройки nginx использовалась инструкция с сайта https://mindsers.blog/post/https-using-nginx-certbot-docker/.


